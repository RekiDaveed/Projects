<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
    <link rel="stylesheet" href="/login/styles.css">
</head>
<body>
    <div id="container"> 
        <form id="page-container" onsubmit="login(event)">
            <p style="font-weight:900; font-size:x-large; text-align: start;">Welcome back</p>
            <p style="text-align: start; color: grey; font-size: 14px;">Please enter your details</p>
            <br>
            <label for="validgmail" style="display: block; margin-right: 190px; margin-bottom: 3px;">Email address</label>
            <div>
                <input id="validgmail" type="" style="width: 290px; height: 28px; border: none; box-shadow: 0px 0px 7px rgba(0, 0, 0, 0.3); border-radius: 4px; padding-left: 5px;">
            </div>
            <br>
            <label for="pass-input" style="display: block; margin-right: 220px; margin-bottom: 3px;">Password</label>
            <div>
                <input id="pass-input" placeholder="Enter strong password" type="password" style="width: 290px; height: 28px; border: none; box-shadow: 0px 0px 7px rgba(0, 0, 0, 0.3); border-radius: 4px; outline: none; padding-left: 5px;">
            </div>
            <div style="text-align: start; margin-top: 2px;">
                <input type="checkbox" onclick="showpassword()"> Show password
            </div>
            <br>
            <p id="erroremail" style="color: red; display: none;">Enter valid email</p>
            <p id="errorpassword" style="color: red; display: none;">Enter valid password</p>
            <br>
            <input type="checkbox"> Remember password
            <br><br>
            <div>
                <button id="sign-in" type="submit">Sign in</button>
            </div>
            <br>
            <p style="color: red; display: none;" id="general-error">Error, check details and try again</p>
            <br>
            <p><a href="/login/resetpassword.html">Forgot Password?</a></p>
            <br>
            <p>Don't have an account? <a href="/login/createaccount.html">Register here</a></p>
        </form>
    </div>
    <script src="https://kit.fontawesome.com/a7238d1282.js" crossorigin="anonymous"></script>
    <script>
        function showpassword() {
            let inputform = document.querySelector('#pass-input');
            inputform.type = (inputform.type === 'password') ? 'text' : 'password';
        }

        function validgmail() {
            const email = document.querySelector('#validgmail');
            const erroremail = document.querySelector('#erroremail');
            const generalerror = document.querySelector('#general-error');
            let isValid = true;

            if (email.value.includes('@gmail.com')) {
                erroremail.style.display = ' none';
                email.style.border = '';
                generalerror.style.display = 'none';
            } else {
                erroremail.style.display = 'block';
                email.style.border = '1px solid red';
                isValid = false; // Set isValid to false
                setTimeout(() => {
                    email.style.border = '';
                }, 5000);
            }
            return isValid;
        }

        function strongpassword() {
            const password = document.querySelector('#pass-input');
            const errorpassword = document.querySelector('#errorpassword');
            const generalerror = document.querySelector('#general-error');
            let isValid = true;

            if (password.value.length >= 8) {
                errorpassword.style.display = 'none';
                password.style.border = '';
                generalerror.style.display = 'none';
            } else {
                errorpassword.style.display = 'block';
                password.style.border = '1px solid red';
                isValid = false; // Set isValid to false
                setTimeout(() => {
                    password.style.border = '';
                }, 5000);
            }
            return isValid;
        }

        function login(event) {
            event.preventDefault(); 
            const isPasswordValid = strongpassword();
            const isEmailValid = validgmail();

            if (isPasswordValid && isEmailValid) {
                console.log('Form submitted successfully.');
                return true; 
            } else {
                console.log('Form contains errors.');
                document.querySelector('#general-error').style.display = 'block'; 
                return false; 
            }
        }
    </script>
</body>
</html>